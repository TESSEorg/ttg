<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=11"/>
    <meta name="generator" content="Doxygen 1.9.8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>ttg: Pull Terminals Design Notes</title>
    <!--BEGIN PROJECT_ICON-->
    <link rel="icon" href="$projecticon" type="image/x-icon" />
    <!--END PROJECT_ICON-->
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <!--BEGIN COPY_CLIPBOARD-->
    <script type="text/javascript" src="clipboard.js"></script>
    <!--END COPY_CLIPBOARD-->
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init();
        DoxygenAwesomeParagraphLink.init();
    </script>
</head>
<body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
            <table cellspacing="0" cellpadding="0">
                <tbody>
                <tr id="projectrow">
                    <td id="projectalign">
                        <div id="projectname">ttg<span id="projectnumber">&#160;1.0.0</span>
                        </div>
                        <div id="projectbrief">Template Task Graph (TTG): flowgraph-based programming model for high-performance distributed-memory algorithms</div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Pull Terminals Design Notes</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md22"></a>
Motivation</h2>
<ul>
<li>This requirement cropped up from the wavefront example borrowed from Cpp-taskflow.</li>
<li>In TTG, every operation with different number of input dependencies is created as a separate Op.</li>
<li>However, some applications require data from various sources purely for computation, and do not necessarily imply a data dependency for execution of the task.</li>
<li>Current model of TTG only allows for data only to be PUSHed to subsequent tasks via terminals. In order to push data from different sources for computation, a 'reader' task is required which when run, instantiates all the tasks it can push data to, which is unnecessary. Tasks should be created when data dependencies are satisfied, and not when data is pushed from a source.</li>
<li>If data can be PULLed by a task when necessary, we can defer running the "reader" tasks until needed.</li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
Prototype Implementation</h2>
<ul>
<li>Create an Op for every pull task. Use the Edges to mark terminals as pull terminals.</li>
<li>A pull Op can contain 0 or 1 pull terminals as input.</li>
<li>Key of the puller is sent as input to the pull task to invoke the task.</li>
<li>If the pull task itself has a pull terminal as input, this would walk through the DAG in a reverse manner until necessary data is pulled.</li>
<li>Invoking a pull task is done via a callback.</li>
<li>A pull task can be invoked at task creation time (eager) or when the task is ready to run with all dependencies satisfied (lazy).</li>
</ul>
<h2><a class="anchor" id="autotoc_md24"></a>
Pros</h2>
<ul>
<li>Ensures unique task IDs for every pull task.</li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
Cons</h2>
<ul>
<li>No way to map a single datasource / key to multiple keys.</li>
<li>Helps with delaying tasks, however not very flexible in design.</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
Design Recommendations</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
Use a map for pull request</h2>
<ul>
<li>Allows specifying a datasource different from the key.</li>
<li>Task keys will not be unique and currently there is no way to handle it.</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Callback Model</h2>
<ul>
<li>Implement a callback for every pull terminal which takes the request (Ex. set of keys) and returns the data.</li>
<li>Data may be remote, however send currently uses a callback model and can probably be used for pull requests as well.</li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
Use Cases</h1>
<ul>
<li>Wavefront Computation</li>
<li>Generator/Reader tasks</li>
<li>Adding 3 vectors - one vector is local and need to pull two other vectors.</li>
<li>SUMMA - pull data multiple times.</li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
Questions</h1>
<ul>
<li>Should Pull Op be able to send data to multiple successors? Use cases?</li>
<li>Cholesky - why pull ops are needed? </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->

<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
    Generated at Tue Feb 10 2026 20:41:12 for <a href="https://https://github.com/ValeevGroup/tiledarray/">ttg</a>
    1.0.0 by &#160;<a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.8
</small></address>
</body>
<script type="text/javascript" src="doxy-boot.js"></script>
</html>
